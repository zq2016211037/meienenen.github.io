{"ast":null,"code":"import _classCallCheck from \"/Users/zqian/Documents/code/2018/react/coolblog/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/zqian/Documents/code/2018/react/coolblog/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/zqian/Documents/code/2018/react/coolblog/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/zqian/Documents/code/2018/react/coolblog/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/zqian/Documents/code/2018/react/coolblog/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/zqian/Documents/code/2018/react/coolblog/src/components/admin/manageblogs/bloglists/index.js\";\nimport React from 'react';\nimport { Table, Input, Popconfirm } from 'antd';\n\nvar EditableCell =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(EditableCell, _React$Component);\n\n  function EditableCell() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, EditableCell);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(EditableCell)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      value: _this.props.value,\n      editable: _this.props.editable || false\n    };\n    return _this;\n  }\n\n  _createClass(EditableCell, [{\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps) {\n      if (nextProps.editable !== this.state.editable) {\n        this.setState({\n          editable: nextProps.editable\n        });\n\n        if (nextProps.editable) {\n          this.cacheValue = this.state.value;\n        }\n      }\n\n      if (nextProps.status && nextProps.status !== this.props.status) {\n        if (nextProps.status === '保存') {\n          this.props.onChange(this.state.value);\n        } else if (nextProps.status === '取消') {\n          this.setState({\n            value: this.cacheValue\n          });\n          this.props.onChange(this.cacheValue);\n        }\n      }\n    }\n  }, {\n    key: \"shouldComponentUpdate\",\n    value: function shouldComponentUpdate(nextProps, nextState) {\n      return nextProps.editable !== this.state.editable || nextState.value !== this.state.value;\n    }\n  }, {\n    key: \"handleChange\",\n    value: function handleChange(e) {\n      var value = e.target.value;\n      this.setState({\n        value: value\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$state = this.state,\n          value = _this$state.value,\n          editable = _this$state.editable;\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 36\n        },\n        __self: this\n      }, editable ? React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 39\n        },\n        __self: this\n      }, React.createElement(Input, {\n        value: value,\n        onChange: function onChange(e) {\n          return _this2.handleChange(e);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 40\n        },\n        __self: this\n      })) : React.createElement(\"div\", {\n        className: \"editable-row-text\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 46\n        },\n        __self: this\n      }, value.toString() || ' '));\n    }\n  }]);\n\n  return EditableCell;\n}(React.Component);\n\nvar BlogLists =\n/*#__PURE__*/\nfunction (_React$Component2) {\n  _inherits(BlogLists, _React$Component2);\n\n  function BlogLists(props) {\n    var _this3;\n\n    _classCallCheck(this, BlogLists);\n\n    _this3 = _possibleConstructorReturn(this, _getPrototypeOf(BlogLists).call(this, props));\n    _this3.columns = [{\n      title: '博客标题',\n      dataIndex: 'title',\n      width: '15%',\n      render: function render(text, record, index) {\n        return _this3.renderColumns(_this3.state.data, index, 'title', text);\n      }\n    }, {\n      title: '博客内容',\n      dataIndex: 'content',\n      width: '25%',\n      render: function render(text, record, index) {\n        return _this3.renderColumns(_this3.state.data, index, 'content', text);\n      }\n    }, {\n      title: '创建时间',\n      dataIndex: 'createTime',\n      width: '15%',\n      render: function render(text, record, index) {\n        return _this3.renderColumns(_this3.state.data, index, 'createTime', text);\n      }\n    }, {\n      title: '作者',\n      dataIndex: 'author',\n      width: '15%',\n      render: function render(text, record, index) {\n        return _this3.renderColumns(_this3.state.data, index, 'author', text);\n      }\n    }, {\n      title: 'operation',\n      dataIndex: 'operation',\n      render: function render(text, record, index) {\n        var editable = _this3.state.data[index].title.editable;\n        return React.createElement(\"div\", {\n          className: \"editable-row-operations\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 84\n          },\n          __self: this\n        }, editable ? React.createElement(\"span\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 87\n          },\n          __self: this\n        }, React.createElement(\"a\", {\n          onClick: function onClick() {\n            return _this3.editDone(index, 'save');\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 88\n          },\n          __self: this\n        }, \"Save\"), React.createElement(Popconfirm, {\n          title: \"Sure to cancel?\",\n          onConfirm: function onConfirm() {\n            return _this3.editDone(index, 'cancel');\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 89\n          },\n          __self: this\n        }, React.createElement(\"a\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 90\n          },\n          __self: this\n        }, \"Cancel\"))) : React.createElement(\"span\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 94\n          },\n          __self: this\n        }, React.createElement(\"a\", {\n          onClick: function onClick() {\n            return _this3.edit(index);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 95\n          },\n          __self: this\n        }, \"Edit\")));\n      }\n    }];\n    _this3.state = {\n      data: [{\n        key: '0',\n        title: {\n          editable: false,\n          value: '32'\n        },\n        content: {\n          editable: false,\n          value: 'London, Park Lane no. 0'\n        },\n        createTime: {\n          editable: false,\n          value: 'Edward King 0'\n        },\n        author: {\n          value: 'London, Park Lane no. 0'\n        }\n      }]\n    };\n    return _this3;\n  }\n\n  _createClass(BlogLists, [{\n    key: \"renderColumns\",\n    value: function renderColumns(data, index, key, text) {\n      var _this4 = this;\n\n      var _data$index$key = data[index][key],\n          editable = _data$index$key.editable,\n          status = _data$index$key.status;\n\n      if (typeof editable === 'undefined') {\n        return text;\n      }\n\n      return React.createElement(EditableCell, {\n        editable: editable,\n        value: text,\n        onChange: function onChange(value) {\n          return _this4.handleChange(key, index, value);\n        },\n        status: status,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      });\n    }\n  }, {\n    key: \"handleChange\",\n    value: function handleChange(key, index, value) {\n      var data = this.state.data;\n      data[index][key].value = value;\n      this.setState({\n        data: data\n      });\n    }\n  }, {\n    key: \"edit\",\n    value: function edit(index) {\n      var data = this.state.data;\n      Object.keys(data[index]).forEach(function (item) {\n        if (data[index][item] && typeof data[index][item].editable !== 'undefined') {\n          data[index][item].editable = true;\n        }\n      });\n      this.setState({\n        data: data\n      });\n    }\n  }, {\n    key: \"editDone\",\n    value: function editDone(index, type) {\n      var data = this.state.data;\n      Object.keys(data[index]).forEach(function (item) {\n        if (data[index][item] && typeof data[index][item].editable !== 'undefined') {\n          data[index][item].editable = false;\n          data[index][item].status = type;\n        }\n      });\n      this.setState({\n        data: data\n      }, function () {\n        Object.keys(data[index]).forEach(function (item) {\n          if (data[index][item] && typeof data[index][item].editable !== 'undefined') {\n            delete data[index][item].status;\n          }\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var data = this.state.data;\n      var dataSource = data.map(function (item) {\n        var obj = {};\n        Object.keys(item).forEach(function (key) {\n          obj[key] = key === 'key' ? item[key] : item[key].value;\n        });\n        return obj;\n      });\n      var columns = this.columns;\n      return React.createElement(Table, {\n        bordered: true,\n        dataSource: dataSource,\n        columns: columns,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175\n        },\n        __self: this\n      });\n    }\n  }]);\n\n  return BlogLists;\n}(React.Component);\n\nexport default BlogLists;","map":{"version":3,"sources":["/Users/zqian/Documents/code/2018/react/coolblog/src/components/admin/manageblogs/bloglists/index.js"],"names":["React","Table","Input","Popconfirm","EditableCell","state","value","props","editable","nextProps","setState","cacheValue","status","onChange","nextState","e","target","handleChange","toString","Component","BlogLists","columns","title","dataIndex","width","render","text","record","index","renderColumns","data","editDone","edit","key","content","createTime","author","Object","keys","forEach","item","type","dataSource","map","obj"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Table, Input, Popconfirm } from 'antd';\n\nclass EditableCell extends React.Component {\n  state = {\n    value: this.props.value,\n    editable: this.props.editable || false,\n  }\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.editable !== this.state.editable) {\n      this.setState({ editable: nextProps.editable });\n      if (nextProps.editable) {\n        this.cacheValue = this.state.value;\n      }\n    }\n    if (nextProps.status && nextProps.status !== this.props.status) {\n      if (nextProps.status === '保存') {\n        this.props.onChange(this.state.value);\n      } else if (nextProps.status === '取消') {\n        this.setState({ value: this.cacheValue });\n        this.props.onChange(this.cacheValue);\n      }\n    }\n  }\n  shouldComponentUpdate(nextProps, nextState) {\n    return nextProps.editable !== this.state.editable ||\n           nextState.value !== this.state.value;\n  }\n  handleChange(e) {\n    const value = e.target.value;\n    this.setState({ value });\n  }\n  render() {\n    const { value, editable } = this.state;\n    return (\n      <div>\n        {\n          editable ?\n            <div>\n              <Input\n                value={value}\n                onChange={e => this.handleChange(e)}\n              />\n            </div>\n            :\n            <div className=\"editable-row-text\">\n              {value.toString() || ' '}\n            </div>\n        }\n      </div>\n    );\n  }\n}\n\nclass BlogLists extends React.Component {\n  constructor(props) {\n    super(props);\n    this.columns = [{\n      title: '博客标题',\n      dataIndex: 'title',\n      width: '15%',\n      render: (text, record, index) => this.renderColumns(this.state.data, index, 'title', text),\n    },{\n      title: '博客内容',\n      dataIndex: 'content',\n      width: '25%',\n      render: (text, record, index) => this.renderColumns(this.state.data, index, 'content', text),\n    }, {\n      title: '创建时间',\n      dataIndex: 'createTime',\n      width: '15%',\n      render: (text, record, index) => this.renderColumns(this.state.data, index, 'createTime', text),\n    }, {\n      title: '作者',\n      dataIndex: 'author',\n      width: '15%',\n      render: (text, record, index) => this.renderColumns(this.state.data, index, 'author', text),\n    }, {\n      title: 'operation',\n      dataIndex: 'operation',\n      render: (text, record, index) => {\n        const { editable } = this.state.data[index].title;\n        return (\n          <div className=\"editable-row-operations\">\n            {\n              editable ?\n                <span>\n                  <a onClick={() => this.editDone(index, 'save')}>Save</a>\n                  <Popconfirm title=\"Sure to cancel?\" onConfirm={() => this.editDone(index, 'cancel')}>\n                    <a>Cancel</a>\n                  </Popconfirm>\n                </span>\n                :\n                <span>\n                  <a onClick={() => this.edit(index)}>Edit</a>\n                </span>\n            }\n          </div>\n        );\n      },\n    }];\n    this.state = {\n      data: [{\n        key: '0',\n        title: {\n          editable: false,\n          value: '32',\n        },\n        content: {\n          editable: false,\n          value: 'London, Park Lane no. 0',\n        },\n        createTime: {\n          editable: false,\n          value: 'Edward King 0',\n        },\n        author: {\n          value: 'London, Park Lane no. 0',\n        }\n      }],\n    };\n  }\n  renderColumns(data, index, key, text) {\n    const { editable, status } = data[index][key];\n    if (typeof editable === 'undefined') {\n      return text;\n    }\n    return (<EditableCell\n      editable={editable}\n      value={text}\n      onChange={value => this.handleChange(key, index, value)}\n      status={status}\n    />);\n  }\n  handleChange(key, index, value) {\n    const { data } = this.state;\n    data[index][key].value = value;\n    this.setState({ data });\n  }\n  edit(index) {\n    const { data } = this.state;\n    Object.keys(data[index]).forEach((item) => {\n      if (data[index][item] && typeof data[index][item].editable !== 'undefined') {\n        data[index][item].editable = true;\n      }\n    });\n    this.setState({ data });\n  }\n  editDone(index, type) {\n    const { data } = this.state;\n    Object.keys(data[index]).forEach((item) => {\n      if (data[index][item] && typeof data[index][item].editable !== 'undefined') {\n        data[index][item].editable = false;\n        data[index][item].status = type;\n      }\n    });\n    this.setState({ data }, () => {\n      Object.keys(data[index]).forEach((item) => {\n        if (data[index][item] && typeof data[index][item].editable !== 'undefined') {\n          delete data[index][item].status;\n        }\n      });\n    });\n  }\n  render() {\n    const { data } = this.state;\n    const dataSource = data.map((item) => {\n      const obj = {};\n      Object.keys(item).forEach((key) => {\n        obj[key] = key === 'key' ? item[key] : item[key].value;\n      });\n      return obj;\n    });\n    const columns = this.columns;\n    return <Table bordered dataSource={dataSource} columns={columns} />;\n  }\n}\n\nexport default BlogLists;"]},"metadata":{},"sourceType":"module"}